/*! mmui - v1.1.0 */
(function(t,o){"function"==typeof define&&define.cmd?define("lib/mmui/1.1.0/mmui",["jquery"],function(t,e,i){var n=t("jquery");i.exports=o(n)}):t.mmui=o(t.jQuery||t.$)})(this,function(t){var o={};return+function(o){var e=!window.XMLHttpRequest,i=function(o){var e={zIndex:499,opacity:.4};this.options=t.extend(e,o),this.init()};i.prototype={overlayer:null,masklayer:null,init:function(){this.overlayer=t('<div id="dm_window_overlay"></div>').appendTo("body").css({"z-index":this.options.zIndex,opacity:this.options.opacity}),e&&(this.masklayer=t('<iframe id="dm_window_selectmask" frameborder="0" />').appendTo("body").css("z-index",this.options.zIndex-1))},show:function(){this.overlayer.show(),this.masklayer&&this.masklayer.show()},hide:function(){this.overlayer.hide(),this.masklayer&&this.masklayer.hide()},destroy:function(){this.overlayer.remove(),this.masklayer&&this.masklayer.remove()}},o.Overlay=i}(o),+function(o){var e={};e.pin=function(o,e){var i,n,s=e.elem,r=s.offset(),a=e.pos;if(a.indexOf("top")>-1&&(i=r.top-o.outerHeight()),a.indexOf("bottom")>-1&&(i=r.top+s.outerHeight()),("bottom"===a||"top"===a)&&(n=r.left),a.indexOf("right")>-1&&(n=r.left+s.outerWidth()),a.indexOf("left")>-1&&(n=r.left-o.outerWidth()),("right"===a||"left"===a)&&(i=r.top),0>i&&(i=r.top+s.outerHeight()),0>n&&(n=r.left+s.outerWidth()),e.offset){var d=e.offset.split(" ");d[0].indexOf("%")>-1?i-=parseInt(d[0].slice(0,-1),10)/100*o.outerHeight()-s.outerHeight()/2:i+=parseInt(d[0],10),i=0>i?0:i,d.length>1&&(d[1].indexOf("%")>-1?n-=parseInt(d[1].slice(0,-1),10)/100*o.outerWidth()-s.outerWidth()/2:n+=parseInt(d[1],10),n=0>n?0:n)}i+o.outerHeight()>t(document).height()&&(i=t(document).height()-o.outerHeight()),n+o.outerWidth()>t(document).width()&&(n=t(document).width()-o.outerWidth()),o.css({top:i,left:n})},e.center=function(o,e){e=e||t(window);var i=parseInt((e.width()-o.outerWidth())/2,10),n=e.height()-o.outerHeight()-40;n=(0>n?0:parseInt(n/2,10))+t(document).scrollTop(),o.css({top:n,left:i})},o.Position=e}(o),+function(o){var e=o.Position,i=o.Overlay,n=function(o,e){this.text=o;var i={zIndex:1e3,opacity:.4,indicator:null};this.options=t.extend(i,e),this.init()};n.prototype={constructor:n,overlay:null,indicator:null,init:function(){this.overlay=new i({zIndex:this.options.zIndex,opacity:this.options.opacity}),this.indicator=this.options.indicator||'<div class="mm-loading"><p>'+this.text+"</p></div>",this.indicator=t(this.indicator).appendTo("body").css("z-index",this.options.zIndex+1),null===this.options.indicator&&e.center(this.indicator)},hide:function(){this.overlay.destroy(),this.indicator.remove()}},o.Loading=n}(o),+function(o){var e=o.Position,i=o.Overlay,n=function(o,e){this.options=e,this.$element=t(o)};n.prototype={constructor:n,overlay:null,init:function(){var o=this.options,n=this;o.modal&&(this.overlay=new i({zIndex:o.zIndex-1}));var s=t('<div class="mm-popup"></div>').appendTo("body").addClass(o.themeClass).css("z-index",o.zIndex);if(""!==o.title){var r=t('<div class="hd"><span class="title">'+o.title+"</span></div>").appendTo(s);o.closeIcon&&t('<span class="close" title="关闭">&times;</span>').appendTo(r).click(function(){"destroy"===o.closeMode?n.destroy():n.hide()})}if(this.$element.appendTo(s).addClass("bd"),o.buttons){var a=t('<div class="ft"></div>').appendTo(s);t.isArray(o.buttons)||(o.buttons=Array(o.buttons));for(var d=0;o.buttons.length>d;d++){var p=o.buttons[d];if(oBtns=t.extend({classname:"confirm",trigger:"click"},p),!p.hasOwnProperty("text"))for(var h in p)oBtns.text=h,oBtns.handler=p[h];"string"==typeof oBtns.handler&&"close"===oBtns.handler?t('<span class="button cancel-button">'+oBtns.text+"</span>").appendTo(a).click(function(){"destroy"===o.closeMode?n.destroy():n.hide()}):t('<span class="button '+oBtns.classname+'-button">'+oBtns.text+"</span>").appendTo(a).on(oBtns.trigger,oBtns.handler)}}o.width&&this.$element.css("width",o.width),o.height&&this.$element.css("height",o.height),this.options.pin?e.pin(s,this.options.pin):e.center(s),this.popuper=s},show:function(){this.popuper.show(),this.options.modal&&this.overlay.show(),this.popuper.show()},hide:function(){this.popuper.hide(),this.options.modal&&this.overlay.hide(),this.options.onHide&&this.options.onHide.call(this)},destroy:function(){this.options.beforeClose&&this.options.beforeClose(),this.popuper.remove(),this.options.modal&&this.overlay.destroy(),this.$element.removeData("popup"),this.options.onDestroy&&this.options.onDestroy.call(this)},rePosition:function(){e.center(this.popuper)}},t.fn.Popup=function(o){return this.each(function(){var e=t(this),i=e.data("popup"),s=t.extend({},t.fn.Popup.defaults,e.data(),"object"==typeof o&&o);i||e.data("popup",i=new n(this,s)),"string"==typeof o?i[o]():s.show&&i.init()})},t.fn.Popup.defaults={show:!0,modal:!1,themeClass:"mmpop-aero",title:"",closeIcon:!0,zIndex:500,closeMode:"destroy"},o.Popup=n}(o),o});