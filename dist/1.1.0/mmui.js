/*! mmui - v1.1.0 - 2014-06-09 */
(function(t,o){"function"==typeof define&&define.cmd?define("lib/mmui/1.1.0/mmui",["jquery"],function(t,i,e){var n=t("jquery");e.exports=o(n)}):t.mmui=o(t.jQuery||t.$)})(this,function(t){var o={};return+function(o){var i=!window.XMLHttpRequest,e=function(o){var i={zIndex:499,opacity:.4};this.options=t.extend(i,o),this.init()};e.prototype={overlayer:null,masklayer:null,init:function(){this.overlayer=t('<div id="dm_window_overlay"></div>').appendTo("body").css({"z-index":this.options.zIndex,opacity:this.options.opacity}),i&&(this.masklayer=t('<iframe id="dm_window_selectmask" frameborder="0" />').appendTo("body").css("z-index",this.options.zIndex-1))},show:function(){this.overlayer.show(),this.masklayer&&this.masklayer.show()},hide:function(){this.overlayer.hide(),this.masklayer&&this.masklayer.hide()},destroy:function(){this.overlayer.remove(),this.masklayer&&this.masklayer.remove()}},o.Overlay=e}(o),+function(o){var i={};i.pin=function(o,i){var e,n,s=i.elem,r=s.offset(),a=i.pos;if(a.indexOf("top")>-1&&(e=r.top-o.outerHeight()),a.indexOf("bottom")>-1&&(e=r.top+s.outerHeight()),("bottom"===a||"top"===a)&&(n=r.left),a.indexOf("right")>-1&&(n=r.left+s.outerWidth()),a.indexOf("left")>-1&&(n=r.left-o.outerWidth()),("right"===a||"left"===a)&&(e=r.top),0>e&&(e=r.top+s.outerHeight()),0>n&&(n=r.left+s.outerWidth()),i.offset){var d=i.offset.split(" ");d[0].indexOf("%")>-1?e-=parseInt(d[0].slice(0,-1),10)/100*o.outerHeight()-s.outerHeight()/2:e+=parseInt(d[0],10),e=0>e?0:e,d.length>1&&(d[1].indexOf("%")>-1?n-=parseInt(d[1].slice(0,-1),10)/100*o.outerWidth()-s.outerWidth()/2:n+=parseInt(d[1],10),n=0>n?0:n)}e+o.outerHeight()>t(document).height()&&(e=t(document).height()-o.outerHeight()),n+o.outerWidth()>t(document).width()&&(n=t(document).width()-o.outerWidth()),o.css({top:e,left:n})},i.center=function(o,i){i=i||t(window);var e=parseInt((i.width()-o.outerWidth())/2,10),n=i.height()-o.outerHeight()-40;n=(0>n?0:parseInt(n/2,10))+t(document).scrollTop(),o.css({top:n,left:e})},o.Position=i}(o),+function(o){var i=o.Position,e=o.Overlay,n=function(o,i){this.text=o;var e={zIndex:1e3,opacity:.4,indicator:null};this.options=t.extend(e,i),this.init()};n.prototype={constructor:n,overlay:null,indicator:null,init:function(){this.overlay=new e({zIndex:this.options.zIndex,opacity:this.options.opacity}),this.indicator=this.options.indicator||'<div class="mm-loading"><p>'+this.text+"</p></div>",this.indicator=t(this.indicator).appendTo("body").css("z-index",this.options.zIndex+1),null===this.options.indicator&&i.center(this.indicator)},hide:function(){this.overlay.destroy(),this.indicator.remove()}},o.Loading=n}(o),+function(o){var i=o.Position,e=o.Overlay,n=function(o,i){this.options=i,this.$element=t(o)};n.prototype={constructor:n,overlay:null,init:function(){var o=this.options,n=this;o.modal&&(this.overlay=new e({zIndex:o.zIndex-1}));var s=t('<div class="mm-popup"></div>').appendTo("body").addClass(o.themeClass).css("z-index",o.zIndex);if(""!==o.title){var r=t('<div class="hd"><span class="title">'+o.title+"</span></div>").appendTo(s);o.closeIcon&&t('<span class="close" title="关闭">&times;</span>').appendTo(r).click(function(){"destroy"===o.closeMode?n.destroy():n.hide()})}if(this.$element.appendTo(s).addClass("bd"),o.buttons){var a=t('<div class="ft"></div>').appendTo(s);t.isArray(o.buttons)||(o.buttons=Array(o.buttons));for(var d=0;o.buttons.length>d;d++){var p=o.buttons[d];if(oBtns=t.extend({classname:"confirm",trigger:"click"},p),!p.hasOwnProperty("text"))for(var h in p)oBtns.text=h,oBtns.handler=p[h];"string"==typeof oBtns.handler&&"close"===oBtns.handler?t('<span class="button cancel-button">'+oBtns.text+"</span>").appendTo(a).click(function(){"destroy"===o.closeMode?n.destroy():n.hide()}):t('<span class="button '+oBtns.classname+'-button">'+oBtns.text+"</span>").appendTo(a).on(oBtns.trigger,oBtns.handler)}}o.width&&this.$element.css("width",o.width),o.height&&this.$element.css("height",o.height),this.options.pin?i.pin(s,this.options.pin):i.center(s),this.popuper=s},show:function(){this.popuper.show(),this.options.modal&&this.overlay.show(),this.popuper.show()},hide:function(){this.popuper.hide(),this.options.modal&&this.overlay.hide(),this.options.onHide&&this.options.onHide.call(this)},destroy:function(){this.options.beforeClose&&this.options.beforeClose(),this.popuper.remove(),this.options.modal&&this.overlay.destroy(),this.$element.removeData("popup"),this.options.onDestroy&&this.options.onDestroy.call(this)},rePosition:function(){i.center(this.popuper)}},t.fn.Popup=function(o){return this.each(function(){var i=t(this),e=i.data("popup"),s=t.extend({},t.fn.Popup.defaults,i.data(),"object"==typeof o&&o);e||i.data("popup",e=new n(this,s)),"string"==typeof o?e[o]():s.show&&e.init()})},t.fn.Popup.defaults={show:!0,modal:!1,themeClass:"mmpop-aero",position:null,posTarget:null,title:"",closeIcon:!0,zIndex:500,closeMode:"destroy"},o.Popup=n}(o),o});